<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<template id="report_delivery_slip_custom_document">
		<t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
                <div class="page">
                    <style>
                        td {
                            font-size: 13px;
                            font-family: sans-serif;
                            padding:3px;
                        }
                    </style>
                    <div class="col-xs-12" style="margin-top:131px;">
                        <table width="100%"> 
                            <tr>
                                <td colspan="4" align="right">
                                    <t t-if="o.x_doc_number"> <span t-field="o.x_doc_number"/> </t>
                                </td>
                            </tr>
                            <tr>
                                <td width="10%">
                                    
                                </td>

                                <td width="30%">

                                    <t t-if="o.scheduled_date"> <span t-esc="o.scheduled_date.strftime('%Y-%m-%d')" t-options="{'widget': 'date'}"/> </t>

                                </td>

                                <td width="10%">
                                    
                                </td>

                                <td width="30%">
                                    <t t-if="o.x_driver_id"> <span t-field="o.x_driver_id.x_date_transport"/> </t>
                                </td>
                            </tr> 
                        </table>
                        <t t-set="picking_partner" t-value="o.x_partner_shipping_id or o.partner_id"/>
                        <table width="100%" style="margin-top:1mm;">
                            <tr>
                                <td style="padding-left: 38mm; height:7mm;">
                                    <t t-if="o.company_id"> <span t-field="o.company_id.street"/> </t>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-left: 38mm; height:07mm;">
                                    <t t-if="picking_partner"> <span t-field="picking_partner.street"/> </t>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-left: 65mm; height:07mm;">
                                    <t t-if="picking_partner"> <span t-esc="picking_partner.name or picking_partner.parent_id.name"/></t>
                                </td>
                            </tr>
                        </table>

                        <table width="100%">
                            <tr>
                                <td width="50%">
                                    <table width="100%" style="margin-top:4px;"> 
                                        <tr>
                                            <td width="100%" style="padding-left: 38mm; height:7mm;">
                                                <t t-if="o.partner_id.vat"> <span t-field="o.partner_id.vat"/> </t>
                                            </td>
                                        </tr> 
                                        <tr>
                                            <td style="padding-left: 35mm; height:7mm;">
                                                <br/>
                                            </td>
                                        </tr> 
                                        <tr>
                                            <td style="padding-left: 40mm; height:7mm;">
                                                <t t-if="o.x_driver_id"> <span t-field="o.x_driver_id.x_carrier_id.x_partner_id.name"/> </t>
                                            </td>
                                        </tr> 
                                        <tr>
                                            <td style="padding-left: 40mm; height:7mm;">
                                                <br/>
                                                <t t-if="o.x_driver_id"> <span t-field="o.x_driver_id.x_carrier_id.x_partner_id.x_doc_number"/> </t>
                                            </td>
                                        </tr> 
                                    </table>
                                </td>

                                <td width="50%">
                                    <table width="100%"> 
                                        <tr>
                                            <td style="padding-left: 43mm; height:15mm;">
                                                <t t-if="o.x_driver_id"> <span t-field="o.x_driver_id.x_vehicle_id.model_id.brand_id.name"/></t>/
                                                <t t-if="o.x_driver_id"> <span t-field="o.x_driver_id.x_vehicle_id.license_plate"/></t>
                                            </td>
                                        </tr> 
                                        <tr>
                                            <td style="padding-left: 50mm; height:10mm;">
                                                <br/>
                                            </td>
                                        </tr> 
                                        <tr>
                                            <td style="padding-left: 50mm; height:10mm;">
                                                <t t-if="o.x_driver_id"> <span t-field="o.x_driver_id.x_partner_id.ref"/></t>
                                            </td>
                                        </tr> 
                                    </table>
                                </td>
                            </tr>
                        </table>

                        <br/>
                        <table width="100%" style="margin-top:10px;">

                            <t t-set="i" t-value="1"/>
                            <t t-set="move_lines" t-value="o.move_line_ids or o.move_lines"/>
                            <tr t-foreach="move_lines" t-as="line">
                                <td align="right" width="10%">
                                    <t t-if="o.move_line_ids and line.qty_done">
                                        <span t-field="line.qty_done"/>
                                    </t>
                                    <t t-else="">
                                        <span t-field="line.product_uom_qty"/>
                                    </t>
                                </td>
                                <td align="left" width="10%" style="padding-left:5mm">
                                    <t t-if="line.product_id"> <span t-field="line.product_id.default_code"/> </t>
                                </td>

                                <td align="left" style="padding-left: 10mm;">
                                    <t t-if="line.product_id"> <span t-field="line.product_id.display_name"/></t>
                                </td>
                                <td align="center" width="20%">
                                    <t t-if="o.move_line_ids">
                                        <span t-field="line.product_uom_id.name"/>
                                    </t>
                                    <t t-else="">
                                        <span t-field="line.product_uom.name"/>
                                    </t>
                                </td>
                                <td align="center" width="20%">
                                </td>

                                <t t-set="i" t-value="i+1"/>
                            </tr>
                        </table>

                        <br/>
                        <br/>
                    </div>

                    <div class="col-xs-12" style="position: fixed; margin-top:245mm;">
                        <table width="100%">
                            <tr>
                                <td width="25%" align="center">
                                    
                                </td>

                                <td width="35%" align="center">
                                    <t t-if="o.picking_type_id.x_sunat_operation_type"> <span t-field="o.picking_type_id.x_sunat_operation_type"/> </t>
                                </td>
                                <td width="50%" rowspan="2">
                                    
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </t>
        </t>
	</template>
	<template id="report_delivery_slip_custom">
		<t t-foreach="docs" t-as="o">
            <t t-call="monivertical_report_customization.report_delivery_slip_custom_document" t-lang="o.partner_id.lang"/>
        </t>
	</template>
	<report
        string="Guia Remision"
        id="action_report_delivery_slip_custom"
        model="stock.picking"
        report_type="qweb-pdf"
        name="monivertical_report_customization.report_delivery_slip_custom"
        file="monivertical_report_customization.report_delivery_slip_custom"
        paperformat="monivertical_report_customization.guio_remision_custom_paperformat"
        print_report_name="'Guia Remision - %s - %s' % (object.partner_id.name or '', object.name)"
    />
</odoo>